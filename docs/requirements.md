# Zenn MCP サーバー要件定義書（簡素化版）

## 1. プロジェクト概要

### 1.1 目的
Zennの特定トピックに関する記事フィードを取得するシンプルなMCP（Model Context Protocol）サーバーを開発する。Claude Codeから利用可能とし、開発者の情報収集を効率化する。

### 1.2 対象ユーザー
- Claude Codeを使用する開発者
- Zennから最新技術情報を効率的に収集したいユーザー

## 2. 機能要件

### 2.1 コア機能

#### 2.1.1 記事フィード取得機能
- **入力パラメータ**
  - トピック名（必須）: 検索対象のトピック文字列
  - 記事数制限（オプション）: デフォルト10件、最大10件

- **処理仕様**
  - Zennトピックフィード (`https://zenn.dev/topics/[トピック名]/feed`) から記事を取得
  - RSS XML形式でのデータ取得
  - 指定件数分の記事を抽出

- **出力データ**
  - タイトル
  - URL
  - 公開日時
  - 記事概要
  - 作成者

## 3. 非機能要件

### 3.1 性能要件
- **レスポンス時間**: 60秒以内
- **同時接続数**: 単一接続（MCPサーバー特性）
- **可用性**: 95%以上

### 3.2 品質要件
- **信頼性**: エラー率1%以下
- **保守性**: シンプルな構造によるメンテナンス容易性
- **テスト**: 単体テストカバレッジ80%以上

## 4. 技術仕様

### 4.1 アーキテクチャ
- **実装方式**: FastMCP（デコレータベース）
- **プログラミング言語**: Python 3.10+
- **依存関係**: 最小限（mcp、requests、beautifulsoup4）

### 4.2 使用ライブラリ
- `mcp[cli]>=1.11.0`: MCPサーバー機能
- `requests>=2.31.0`: HTTP通信
- `beautifulsoup4>=4.12.0`: XMLパース
- `fastapi>=0.104.0`: ヘルスチェック用
- `vibelogger>=0.1.0`: ログ出力

### 4.3 MCPツール定義

#### search_zenn_articles
```python
{
  "name": "search_zenn_articles",
  "description": "Zennから指定トピックの記事フィードを取得",
  "inputSchema": {
    "type": "object",
    "properties": {
      "topic": {
        "type": "string",
        "description": "検索トピック"
      },
      "max_articles": {
        "type": "integer",
        "minimum": 1,
        "maximum": 10,
        "default": 10,
        "description": "最大取得記事数"
      }
    },
    "required": ["topic"]
  }
}
```

## 5. インターフェース仕様

### 5.1 入力仕様
- **topic**: 文字列（必須）
- **max_articles**: 整数 1-10（オプション、デフォルト10）

### 5.2 出力仕様
```markdown
# トピック: {topic}
取得記事数: {count}件

## 1. {title}
- **作成者**: {creator}
- **作成日**: {published_at}
- **概要**: {description}
- **URL**: {url}
```

## 6. 制約事項

### 6.1 技術制約
- Zennフィードの可用性に依存
- RSS XML形式のみ対応
- リアルタイム更新なし（フィード更新タイミングに依存）

### 6.2 機能制約
- 記事内容の詳細取得なし
- AI要約機能なし
- 期間フィルタリングなし
- ファイル保存機能なし

## 7. セキュリティ要件

### 7.1 入力検証
- パラメータの型・範囲チェック
- 不正文字列の除去

### 7.2 通信セキュリティ
- HTTPS通信の使用
- タイムアウト設定（60秒）

## 8. 運用要件

### 8.1 ログ要件
- 操作ログ: リクエスト内容、レスポンス件数
- エラーログ: 例外発生時の詳細情報
- パフォーマンスログ: 処理時間

### 8.2 監視要件
- ヘルスチェックエンドポイント (`/health`)
- エラー率監視
- レスポンス時間監視

## 9. 開発・テスト要件

### 9.1 開発環境
- Python 3.10+
- uv (パッケージマネージャー)
- pytest (テストフレームワーク)

### 9.2 テスト要件
- 単体テスト: 各機能の動作確認
- 統合テスト: MCPツールとしての動作確認
- エラーハンドリングテスト

## 10. 受け入れ基準

### 10.1 機能面
- [ ] トピック指定でフィード取得が可能
- [ ] 記事の基本情報が正確に表示
- [ ] 最大10件の制限が正しく動作
- [ ] エラー時に適切なメッセージが表示

### 10.2 技術面
- [ ] 全テストが通る
- [ ] FastMCPとして正常に動作
- [ ] Claude Codeから呼び出し可能
- [ ] エラーハンドリングが適切

## 11. プロジェクト構成

```
zenn_mcp_dev/
├── app/
│   ├── __init__.py
│   ├── main.py              # FastMCPサーバー
│   ├── crawler.py           # フィード取得
│   ├── config.py            # 設定
│   └── logging_config.py    # ログ設定
├── tests/
│   ├── test_main.py         # メイン機能テスト
│   ├── test_crawler.py      # クローラーテスト
│   ├── test_config.py       # 設定テスト
│   └── test_logging.py      # ログテスト
├── docs/
│   ├── requirements.md      # 要件定義（本ファイル）
│   ├── sow/                 # 作業範囲定義
│   └── dev_log/             # 開発ログ
├── pyproject.toml           # プロジェクト設定
├── requirements.txt         # 依存関係
└── CLAUDE.md               # 開発ルール
```

## 12. 進捗状況

### 12.1 完了済み
- [x] プロジェクト設計・要件定義
- [x] FastMCP実装
- [x] フィード取得機能
- [x] テスト実装
- [x] ドキュメント整備

### 12.2 今後の予定
- [ ] 必要に応じた機能拡張
- [ ] パフォーマンス最適化
- [ ] 運用監視機能強化